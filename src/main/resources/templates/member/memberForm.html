<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">


<!--CSS-->
<!-- Thymeleaf의 특별한 태그로, 렌더링 시 HTML에 출력되지 않고 내부 콘텐츠만 처리

layout:fragment="css"는 레이아웃 다이얼렉트(dialect)를 사용하여 "css"라는 이름의 프래그먼트를 정의-->
<th:block layout:fragment="css">
        <style>
            .fieldError{
                color: #bd21e0;
            }
        </style>
</th:block>

<!-- 사용자 스크립트 -->
<th:block layout:fragment="script">
        <!-- 스크립트 프래그먼트 시작 -->
        <script th:inline="javascript">
                document.addEventListener('DOMContentLoaded', function() {
                        // Thymeleaf 컨텍스트에서 errorMessage 변수 가져오기
                        let errorMessage = [[${errorMessage}]];
                        // errorMessage가 존재하면 alert으로 표시
                        if(errorMessage != null) {
                                alert(errorMessage);
                        }
                });
        </script>  <!-- 스크립트 프래그먼트 종료 -->
</th:block> <!-- 주석점 -->

<div layout:fragment="content">
<!--        action="/members/new" - 폼이 제출될 URL 경로를 지정
            role="form" - WAI-ARIA 역할 속성으로, 접근성을 위해 이 요소가 폼임을 명시
            method="post" - HTTP 메소드를 지정합니다. POST 방식은 데이터를 HTTP 요청 본문에
            포함시켜 서버로 전송합니다

            이름"이라는 텍스트를 가진 라벨을 생성
            현재 모델(또는 폼 객체)의 "name" 속성과 바인딩
            조건부로 표시되는 오류 메시지 단락
            "Incorrect Data": 기본 오류 메시지로, Thymeleaf 처리 과정에서 실제 오류 메시지로 대체
            -->
        <form action="/members/new" role="form" method="post" th:object="${memberFormDTO}">
                <div class="form-group">
                        <label th:for="name">이름</label>
                        <input type="text" th:field="*{name}" class="form-control"
                               placeholder="이름을 입력해주세요.">
                        <p th:if="${#fields.hasErrors('name')}"
                           th:errors="*{name}" class="fieldError">Incorrect Data</p>
                </div>
                <div class="form-group">
                        <label th:for="email">이메일주소</label>
                        <input type="email" th:field="*{email}" class="form-control"
                               placeholder="이메일을 입력해주세요.">
                        <p th:if="${#fields.hasErrors('email')}"
                           th:errors="*{email}" class="fieldError">Incorrect Data</p>
                </div>
                <div class="form-group">
                        <label th:for="password">비밀번호</label>
                        <input type="password" th:field="*{password}" class="form-control"
                               placeholder="비밀번호를 입력해주세요.">
                        <p th:if="${#fields.hasErrors('password')}"
                           th:errors="*{password}" class="fieldError">Incorrect Data</p>
                </div>
                <div class="form-group">
                        <label th:for="address">주소</label>
                        <input type="text" th:field="*{address}" class="form-control"
                               placeholder="주소를 입력해주세요.">
                        <p th:if="${#fields.hasErrors('address')}"
                           th:errors="*{address}" class="fieldError">Incorrect Data</p>
                </div>
                <div style="text-align:center">
                        <button type="submit" class="btn btn-primary">Submit</button>
                </div>
                <input type="hidden" th:name="${_csrf.parameterName}"
                th:value="${_csrf.token}">
        </form>
</div>

</html>